gsap.registerPlugin(ScrollTrigger);function headerFixedInit(){const header=document.querySelector('.js-header');const limit=document.querySelector('.js-header-limit');if(!header||!limit)return;const limitOffset=limit.getBoundingClientRect().top+window.scrollY;ScrollTrigger.create({trigger:document.body,start:()=>limitOffset+' top',end:'bottom bottom',onUpdate:self=>{header.classList.toggle('is-fixed',self.scroll()>limitOffset);},invalidateOnRefresh:true});}function navInit(){const $body=document.querySelector('body');const $navToggle=document.getElementById('nav-toggle');const $nav=document.getElementById('main-nav');const $overlay=document.querySelector(".js-nav-overlay");const mediaq=window.matchMedia("(max-width: 1199px)");const $navItems=document.querySelectorAll(".js-nav-item");function applyDelays(){if(!mediaq.matches){$navItems.forEach(el=>el.style.transitionDelay="");return;}if($body.classList.contains("nav-open")||$navToggle.checked){$navItems.forEach((el,i)=>{const delay=0.10+i*0.05;el.style.transitionDelay=`${delay}s`;});}else{$navItems.forEach(el=>el.style.transitionDelay="0s");}}function hideNav(){if($navToggle.checked)$navToggle.checked=false;$nav.classList.add('is-closing');$nav.classList.remove('is-visible');$body.classList.remove('nav-open');applyDelays();}$navToggle.onchange=()=>{if($navToggle.checked){$nav.classList.add('is-visible');$body.classList.add('nav-open');}else{hideNav();}applyDelays();};if($overlay){$overlay.addEventListener("click",()=>{hideNav();$navToggle.checked=false;});}$nav.addEventListener('animationend',(event)=>{if(event.target===$nav&&$nav.classList.contains('is-closing')){$nav.classList.remove('is-closing');$nav.classList.remove('is-visible');}});mediaq.addEventListener("change",applyDelays);applyDelays();}function anchorOnLoad(){const hash=window.location.hash;if(!hash)return;const id=hash.slice(1);const target=document.getElementById(id);if(!target)return;requestAnimationFrame(()=>{requestAnimationFrame(()=>{const header=document.querySelector('.js-header');const headerHeight=header?header.offsetHeight:0;const rect=target.getBoundingClientRect();const scrollY=window.scrollY||window.pageYOffset;const targetY=rect.top+scrollY-headerHeight;window.scrollTo({top:targetY,behavior:'auto'});});});}window.addEventListener('load',()=>{headerFixedInit();ScrollTrigger.refresh();navInit();anchorOnLoad();});function scrollAnimationsInit(){gsap.set(".js-animate-in",{opacity:0,y:40});function animateIn(batch){gsap.to(batch,{y:0,opacity:1,duration:0.8,ease:"power2.out",stagger:0.15});}function animateOut(batch){gsap.to(batch,{y:40,opacity:0,duration:0.5,stagger:0.1});}ScrollTrigger.batch(".js-animate-in",{start:"top 80%",onEnter:animateIn,onEnterBack:animateIn,onLeaveBack:animateOut});ScrollTrigger.refresh();ScrollTrigger.getAll().forEach(st=>{if(st.isActive){gsap.set(st.trigger,{opacity:1,y:0});}});}window.addEventListener("load",scrollAnimationsInit);